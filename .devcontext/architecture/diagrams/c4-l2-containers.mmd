%% C4 Level 2: Containers â€” Transformers internals and neighbors
%% Keep this diagram focused and small
flowchart TB
    subgraph transformers["Transformers"]
      direction TB
      api_pipelines["API: Pipelines"]
      api_trainer["API: Trainer"]
      api_autoclasses["API: Auto* / PreTrained*"]
      cli["CLI: transformers-cli"]
      generation["Module: Generation"]
      utils["Module: Utils / Config"]
      backends["Backends: PyTorch / TensorFlow / JAX"]
    end

    hub(["Hugging Face Hub"]):::external
    datasets(["Datasets"]):::external
    accelerate(["Accelerate"]):::external
    peft(["PEFT"]):::external
    engines(["Export / Inference Engines"]):::external

    api_autoclasses -->|from_pretrained / save_pretrained| hub
    cli -->|login / repo ops| hub
    api_pipelines -->|uses| backends
    api_trainer -->|uses| backends
    generation -->|uses| backends
    utils --> backends

    api_pipelines -->|load| datasets
    api_trainer -->|load| datasets
    api_trainer -->|integrate| accelerate
    api_trainer -->|integrate| peft

    api_trainer -->|export| engines
    api_pipelines -->|export| engines

classDef external fill:#fff4e6,stroke:#e8590c,stroke-width:1px,color:#1c1c1c
